<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23f06292' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M12 5a3 3 0 1 0-5.993 1.003c.005 0 .01 0 .015 0A3 3 0 0 0 12 5Z' /%3e%3cpath d='M12 19a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z' /%3e%3cpath d='M12 13a3 3 0 1 0-5.993 1.003c.005 0 .01 0 .015 0A3 3 0 0 0 12 13Z' /%3e%3cpath d='M19 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z' /%3e%3cpath d='M11 15.5v-1.05a.5.5 0 0 1 .28-.455L14 12.5' /%3e%3cpath d='M13.5 10.5v-1a.5.5 0 0 0-.28-.455L11 7.5' /%3e%3cpath d='M12 5.5V4a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v1.5' /%3e%3cpath d='M12 18.5V20a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-1.5' /%3e%3cpath d='m4.42 10.45-.01.01' /%3e%3cpath d='m18.58 13.55.01-.01' /%3e%3c/svg%3e" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MindCare AI - Mental Health Support</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                DEFAULT: '#f06292', // Peach
                light: '#f48fb1',
                dark: '#c2185b',
              },
              secondary: '#66bb6a', // Light Green for accents like success
              accent: '#ffb74d', // Light Orange for guidance
              light: '#fff3e0', // Very light peach background
              base: '#f8f4ed', // Slightly darker than light for elements
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              serif: ['Georgia', 'serif'], // Added for a classic touch
            },
          },
        },
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Georgia:wght@400;700&display=swap" rel="stylesheet">
    <!-- React and ReactDOM are loaded from ESM.sh for direct browser use -->
    <script src="https://esm.sh/react@18.3.1" type="module"></script>
    <script src="https://esm.sh/react-dom@18.3.1/client" type="module"></script>

    <style>
      .animate-scale-in {
        animation: scaleIn 0.3s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
      }
      @keyframes scaleIn {
        from { transform: scale(0.95); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }
      body {
        font-family: 'Inter', sans-serif;
      }
      h1, h2, h3, h4 {
        font-family: 'Georgia', serif; /* Using serif for headings for classic feel */
      }
      /* Custom scrollbar for chat messages */
      .chat-messages::-webkit-scrollbar {
        width: 8px;
      }
      .chat-messages::-webkit-scrollbar-track {
        background: #f8f4ed; /* base */
        border-radius: 10px;
      }
      .chat-messages::-webkit-scrollbar-thumb {
        background: #f06292; /* primary */
        border-radius: 10px;
      }
      .chat-messages::-webkit-scrollbar-thumb:hover {
        background: #c2185b; /* primary-dark */
      }
    </style>
  </head>
  <body class="bg-light font-sans text-slate-800">
    <div id="root"></div>
    <script type="module">
      import React, { useState, useMemo, useRef, useEffect, useCallback } from 'https://esm.sh/react@18.3.1';
      import ReactDOM from 'https://esm.sh/react-dom@18.3.1/client';
      
      // Removed direct import for GoogleGenerativeAI to avoid importmap/bundling issues.
      // The AI functionality will be simulated or show a placeholder.

      // --- Constants ---
      const DOCTORS = [
        { id: 1, name: "Dr. Anjali Sharma", specialty: "Psychiatrist", city: "Mumbai", fees: 2000, imageUrl: "https://picsum.photos/id/1027/200/200" },
        { id: 2, name: "Dr. Vikram Singh", specialty: "Clinical Psychologist", city: "Delhi", fees: 1500, imageUrl: "https://picsum.photos/id/1005/200/200" },
        { id: 3, name: "Dr. Priya Das", specialty: "Counseling Psychologist", city: "Bangalore", fees: 1200, imageUrl: "https://picsum.photos/id/1011/200/200" },
        { id: 4, name: "Dr. Sameer Khan", specialty: "Psychiatrist", city: "Delhi", fees: 2200, imageUrl: "https://picsum.photos/id/1012/200/200" },
        { id: 5, name: "Dr. Meera Iyer", specialty: "Child Psychologist", city: "Mumbai", fees: 1800, imageUrl: "https://picsum.photos/id/1013/200/200" },
        { id: 6, name: "Dr. Rohan Gupta", specialty: "Clinical Psychologist", city: "Bangalore", fees: 1600, imageUrl: "https://picsum.photos/id/1014/200/200" },
        { id: 7, name: "Dr. Sneha Patil", specialty: "Counseling Psychologist", city: "Pune", fees: 1100, imageUrl: "https://picsum.photos/id/1015/200/200" },
        { id: 8, name: "Dr. Arjun Reddy", specialty: "Psychiatrist", city: "Pune", fees: 1900, imageUrl: "https://picsum.photos/id/1016/200/200" },
      ];
      const CITIES = ["Mumbai", "Delhi", "Bangalore", "Pune"];
      const SPECIALTIES = ["Psychiatrist", "Clinical Psychologist", "Counseling Psychologist", "Child Psychologist"];

      // --- Gemini Service (SIMULATED / PLACEHOLDER) ---
      // This section is modified to remove direct GoogleGenAI imports for a "mere HTML" file.
      // In a real application, you would use a build tool and proper module imports.
      const getAiAnalysis = async (problem) => {
        return new Promise(resolve => {
          setTimeout(() => {
            // Simulate AI response based on severity keywords or default
            let severity = 'Info';
            let guidance = "Focus on self-care, healthy routines, and consider talking to a trusted friend or family member.";
            let recommendedSpecialties = ["Counseling Psychologist"];

            if (problem.toLowerCase().includes("constantly tired") || problem.toLowerCase().includes("lost interest")) {
                severity = 'Moderate';
                guidance = "Your feelings of persistent tiredness and loss of interest could be signs of underlying stress or mood changes. Try incorporating light physical activity, ensuring consistent sleep, and engaging in small activities you used to enjoy, even if briefly. Journaling your thoughts can also be helpful.";
                recommendedSpecialties = ["Clinical Psychologist", "Psychiatrist"];
            } else if (problem.toLowerCase().includes("panic") || problem.toLowerCase().includes("hopeless") || problem.toLowerCase().includes("overwhelmed") || problem.toLowerCase().includes("suicidal")) {
                severity = 'Severe';
                guidance = "It sounds like you're going through a very difficult time. It's important to prioritize your well-being. Focus on grounding exercises like deep breathing. Reach out to a support system immediately. Professional help can provide effective strategies. In case of immediate crisis, please contact emergency services.";
                recommendedSpecialties = ["Psychiatrist", "Clinical Psychologist"];
            } else if (problem.toLowerCase().includes("stress") || problem.toLowerCase().includes("anxious") || problem.toLowerCase().includes("sleepless")) {
                severity = 'Mild';
                guidance = "Managing stress is key. Practice mindfulness or meditation for a few minutes daily. Ensure you're getting adequate rest and nutrition. Light exercise can also significantly reduce anxiety. Consider organizing your tasks to reduce feelings of overwhelm.";
                recommendedSpecialties = ["Counseling Psychologist"];
            } else if (problem.toLowerCase().includes("relationship")) {
                severity = 'Info';
                guidance = "Relationship challenges are common. Open communication, empathy, and setting boundaries can be very helpful. Sometimes, having a neutral third party can also provide valuable perspective.";
                recommendedSpecialties = ["Counseling Psychologist"];
            } else if (problem.toLowerCase().includes("career") || problem.toLowerCase().includes("job")) {
                severity = 'Info';
                guidance = "Career stress is often about finding balance and purpose. Consider setting small, achievable goals, improving time management, and exploring new skills. It's also important to separate your self-worth from your professional role.";
                recommendedSpecialties = ["Counseling Psychologist"];
            }

            resolve({
              severity: severity,
              guidance: guidance,
              recommendedSpecialties: recommendedSpecialties,
              disclaimer: "This is an AI-generated analysis and not a medical diagnosis. Please consult a qualified doctor for a formal diagnosis and treatment plan.",
            });
          }, 2000); // Simulate API call delay
        });
      };
      
      // --- Icons ---
      // All icons are kept as React components for direct use.
      const BrainCircuitIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M12 5a3 3 0 1 0-5.993 1.003c.005 0 .01 0 .015 0A3 3 0 0 0 12 5Z" }), React.createElement("path", { d: "M12 19a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" }), React.createElement("path", { d: "M12 13a3 3 0 1 0-5.993 1.003c.005 0 .01 0 .015 0A3 3 0 0 0 12 13Z" }), React.createElement("path", { d: "M19 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" }), React.createElement("path", { d: "M11 15.5v-1.05a.5.5 0 0 1 .28-.455L14 12.5" }), React.createElement("path", { d: "M13.5 10.5v-1a.5.5 0 0 0-.28-.455L11 7.5" }), React.createElement("path", { d: "M12 5.5V4a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v1.5" }), React.createElement("path", { d: "M12 18.5V20a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-1.5" }), React.createElement("path", { d: "m4.42 10.45-.01.01" }), React.createElement("path", { d: "m18.58 13.55.01-.01" }));
      const ShieldCheckIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" }), React.createElement("path", { d: "m9 12 2 2 4-4" }));
      const SparklesIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "m12 3-1.9 5.8-5.8 1.9 5.8 1.9L12 18l1.9-5.8 5.8-1.9-5.8-1.9z" }), React.createElement("path", { d: "M5 3v4" }), React.createElement("path", { d: "M19 17v4" }), React.createElement("path", { d: "M3 5h4" }), React.createElement("path", { d: "M17 19h4" }));
      const LightBulbIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 18 9 18 7c0-2.2-1.8-4-4-4S10 4.8 10 7c0 2 .3 3.2 1.5 4.5.8.8 1.3 1.5 1.5 2.5" }), React.createElement("path", { d: "M9 18h6" }), React.createElement("path", { d: "M10 22h4" }));
      const StethoscopeIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3" }), React.createElement("path", { d: "M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4" }), React.createElement("circle", { cx: "20", cy: "10", r: "2" }));
      const AlertTriangleIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3" }), React.createElement("path", { d: "M12 9v4" }), React.createElement("path", { d: "M12 17h.01" }));
      const SearchIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("circle", { cx: "11", cy: "11", r: "8" }), React.createElement("path", { d: "m21 21-4.3-4.3" }));
      const MapPinIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" }), React.createElement("circle", { cx: "12", cy: "10", r: "3" }));
      const AcademicCapIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z" }), React.createElement("path", { d: "M22 10v6" }), React.createElement("path", { d: "M6 12.5V16a6 3 0 0 0 12 0v-3.5" }));
      const CurrencyRupeeIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M6 3h12" }), React.createElement("path", { d: "M6 8h12" }), React.createElement("path", { d: "m6 13 8.5 8" }), React.createElement("path", { d: "M6 13h3" }), React.createElement("path", { d: "M9 13c6.667 0 6.667-10 0-10" }));
      const CheckCircleIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M22 11.08V12a10 10 0 1 1-5.93-9.14" }), React.createElement("polyline", { points: "22 4 12 14.01 9 11.01" }));
      const XMarkIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M6 18 18 6M6 6l12 12" }));
      const MicrophoneIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" }), React.createElement("path", { d: "M19 10v2a7 7 0 0 1-14 0v-2" }), React.createElement("line", { x1: "12", x2: "12", y1: "19", y2: "22" }));
      const StopCircleIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("circle", { cx: "12", cy: "12", r: "10" }), React.createElement("rect", { width: "6", height: "6", x: "9", y: "9" }));
      const UserIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" }), React.createElement("circle", { cx: "12", cy: "7", r: "4" }));
      const BotIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M12 8V4H8" }), React.createElement("rect", { width: "16", height: "12", x: "4", y: "8", rx: "2" }), React.createElement("path", { d: "M2 14h2" }), React.createElement("path", { d: "M20 14h2" }), React.createElement("path", { d: "M15 13v2" }), React.createElement("path", { d: "M9 13v2" }));
      const MessageSquareIcon = (props) => React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...props }, React.createElement("path", { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" }));

      // --- Components ---
      const Loader = () => {
        return React.createElement("div", { className: "flex flex-col items-center justify-center gap-2" },
          React.createElement("div", { className: "w-8 h-8 border-4 border-base border-t-primary rounded-full animate-spin" }),
          React.createElement("p", { className: "text-sm text-slate-500" }, "AI is thinking...")
        );
      };

      const DoctorCard = ({ doctor, onBook }) => {
        return React.createElement("div", { className: "bg-base border border-slate-200 p-4 rounded-xl flex items-center gap-4 transition-all duration-300 hover:shadow-lg hover:border-primary/50 group" },
          React.createElement("img", { src: doctor.imageUrl, alt: doctor.name, className: "w-20 h-20 rounded-full object-cover border-2 border-white shadow-sm" }),
          React.createElement("div", { className: "flex-grow" },
            React.createElement("h4", { className: "font-bold text-slate-800 text-lg" }, doctor.name),
            React.createElement("div", { className: "text-sm text-slate-600 mt-1 space-y-1" },
              React.createElement("div", { className: "flex items-center gap-1.5" }, React.createElement(AcademicCapIcon, { className: "w-4 h-4 text-primary" }), React.createElement("span", null, doctor.specialty)),
              React.createElement("d